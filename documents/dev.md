


keywords
研究的对象。
也是交互的基础。

keyword_data_logs （GTRENDS包）关键词数据日志，所有日志都在里面。每次写开关判断是否重复存，每次读开关判断读最新还是最旧。
id
keyword 关键词，原样


需求
现有path和filename若干。按path分类。filename经过字符处理，成为作为研究对象的keyword。也就是google里面的search term。
获取keyword在谷歌趋势对应的最接近的topic。定义，topic_title字符最接近。可通过自动补全，相关topic获取。
从谷歌趋势获取topic对应的geo等数据，进行分析。最好可以直观使用sql分析，即topic和geo自动关联。

获取某个 geo 在第一位对应的 keyword。或者其他需求，总之都是。
获取 keyword，根据geo数量排名。或者根据geo value之和。


缓存请求响应
explore类，无参数类，和其他类。
explore可以通过方法，keyword或keyword数组，参数option，额外参数，当前。确定唯一值。比较长的参数例如option可以采用json之后md5。
无参数类可以直接通过方法查找，额外日期都不需要。
其他类，比如趋势等，最新的不需要缓存。历史的，可以把参数拼接视为一个option。通过payload识别也可以。
其实用uri最好，但是监听不到，并且不能排除有隐藏参数，最好全用显式参数。
可以保存返回json历史记录，节省请求。
如果想要忽略日期更新，比如默认不输入日期time为空，还可以忽略日期。
缓存以这个包为准，因为不同包的名字字段可能不同，解析也不同。
表设计，最好不同表和模型。即同一个表里面数据结构也相似，是同一类数据，方便管理。


分析
data结果对应什么？只要有keyword，就对应keyword。不管是topic，query，还是其他不存在结果的输入。没有keyword的，属于另一种data。
explore结果对应什么？必然是keyword。explore全部都有keyword。
keyword和topic的关系是什么？其实是一对一。google会自动把term映射为对应mid的topic，如果存在。
geo要不要单独


json数据
data，如果更新后不为空，而且md5不一样，则采用最新。
log，

数据量估计
keywords对应的explore，天天分分秒秒可能都变。
趋势，也可能都变。
时间需求，有效期判断，天。
绝对值。

分析，根据现有json，其实生成各种关联分析很快，随时可以重构。也就是说，只要基础数据确定了以什么版本为准进行分析，关联数据随时可以更新看最新。



数据结构

term，趋势等数据源的检索对象。在谷歌趋势里面可能是普通term，topic或者query。不用包里面的说法keyword避免和word歧义。但无论类型是什么，一律认为是同一种数据结构，操作防范也一样。关联的数据结构也一样设计，不设计多套。一般来说，topic全面，query精准，term备选。不过无论什么结果，都是关联到term的。suggestion/explore等字段作为查询结果，初期没有拆表强需求。
topic，mid和title等稳定。可以作为检索方便使用。每个topic都是term，但每个term不一定有topic。title方便阅读考虑可以冗余到term去。快速起见可以把前5位top冗余存储到term表里面去。
geo，长期稳定不变，如果变了，那么老数据也可以更新了，一般没必要单独保存老数据。历史数据可以捞缓存。快速起见可以把前5位冗余存储到term表里面去。复杂的再用关联表。
cache，缓存，key，value。一般永久，偶尔过期。key偶尔加日期。
------
query。没什么关联计算需求和长期存储的必要。值得研究的query已经成为人工word，不值得的也不会研究。一般在结果json里面需要的时候查看。用的包里面作为数组查询，可见对比研究使用频率才高。
time目前没有太多对比研究需求。暂时也不知道如何研究。研究还需要计算函数等等。
------
log日志。可以用cache代替。key加日期即可。git那种每个版本都保存的话，人工没有这个维护能力机器才有这个可能，但是需要回退数据多了很多操作。注意，日志版本是指请求的时间，不是指谷歌趋势的历史数据，例如当前检索2008的数据。
bak备份。人工需要时再创建，复制一个。这个需求并不频繁。手动对老表重命名备份，然后重建空表也可以。人工的在前或者在后加bak_归档或记录对应的日期时间就可以了。
word，词，人工数据。人的语言。英文中文等各种语言。各种方式导入到数据库。和其他机器数据仅字符内容相似，而不关联。不包括mid等数据库用的id，也不必考虑在趋势等数据源里面的形式。物理上应该可以重复，语义上同一个类别语境里面的可以不重复。namespace，命名空间，唯一作为word的语境空间。但是暂时似乎不需要机器管理，自己人工用excel管理，导入到term就可以了。有namespace的是课题。
